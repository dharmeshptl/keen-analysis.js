{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/keen-core/lib/utils/each.js","webpack:///./node_modules/keen-core/lib/utils/extend.js","webpack:///./node_modules/keen-core/lib/utils/serialize.js","webpack:///./lib/utils/http-browser.js","webpack:///./lib/request.js","webpack:///./node_modules/component-emitter/index.js","webpack:///./node_modules/keen-core/lib/utils/parse-params.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/keen-core/lib/index.js","webpack:///./lib/index.js","webpack:///./lib/browser.js"],"names":["GET","get","POST","post","PUT","put","DELETE","del","config","callback","fetch","sendFetch","xhrObject","sendXhr","xdrObject","sendXdr","sendJsonp","console","log","method","undefined","self","headers","url","api_key","params","value","key","body","JSON","stringify","mode","then","response","ok","json","Promise","reject","error_code","responseJSON","message","status","statusText","call","resolve","root","window","XMLHttpRequest","ActiveXObject","location","protocol","e","xhr","cb","onreadystatechange","readyState","parse","responseText","open","setRequestHeader","send","XDomainRequest","xdr","timeout","ontimeout","handleResponse","onerror","onload","toLowerCase","setTimeout","a","b","timestamp","Date","getTime","scriptTag","document","createElement","parent","getElementsByTagName","callbackName","loaded","src","appendChild","removeChild","request","getAnalysisType","httpHandlers","str","bind","prototype","auth","obj","num","httpHandler","httpOptions","analysis_type","indexOf","onCancel","httpRequest","err","res","augmentedResponse","event_collection","query","abort","split","length","KeenLibrary","readKey","arguments","String","name","q","Query","run","output","queries","Array","promises","i","push","analysis","all","analysisType","set","timezone","getTimezoneOffset","attributes","v","k","match","RegExp","replace","$1","dv","index","deepValue","deepKey","_deepKey","attribute","addFilter","property","operator","filters","KeenAnalysis","Keen","extendLibrary"],"mappings":"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A;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,YAAY;AACZ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;;;;;;;AClKA;;AAEA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,6BAA6B,+CAA+C,EAAE;AAC9E;;AAEA;AACA;AACA;AACA;AACA;;;;;;;ACfA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,SAAS,IAAI,KAAK;AACtC,oBAAoB,SAAS,IAAI,KAAK;AACtC,oBAAoB,SAAS,IAAI,KAAK;AACtC,oBAAoB,SAAS,IAAI,KAAK,eAAe,UAAU;AAC/D,oBAAoB,SAAS,IAAI,KAAK,eAAe,UAAU;AAC/D,oBAAoB,SAAS,IAAI,KAAK,eAAe,UAAU;AAC/D,oBAAoB,SAAS,IAAI,KAAK,eAAe,UAAU;AAC/D,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,kDAAkD,SAAS,IAAI,KAAK;AACpE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,YAAY;AAC1C;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,CAAC,sIAAsI;;;;;;;;;;;;;;;;8QCpOvI;;AAEA;;;AADA;;;;AAEA;;;;AACA;;;;;;AAEAC,mBAAYlB,SAAZ,CAAsBmB,OAAtB,GAAgC,UAASrB,GAAT,EAAa;AAC3C,MAAI,CAACsB,UAAUH,MAAf,EAAuB,OAAO,KAAKnG,MAAL,CAAYqG,OAAnB;AACvB,OAAKrG,MAAL,CAAYqG,OAAZ,GAAsBrB,MAAMuB,OAAOvB,GAAP,CAAN,GAAoB,IAA1C;AACA,SAAO,IAAP;AACD,CAJD;;AAMAoB,mBAAYlB,SAAZ,CAAsBc,KAAtB,GAA8B,UAASlC,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","file":"keen-analysis.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","module.exports = each;\n\nfunction each(o, cb, s){\n  var n;\n  if (!o){\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array){\n    // Indexed arrays, needed for Safari\n    for (n=0; n<o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false){\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o){\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","module.exports = extend;\n\nfunction extend(target){\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n};\n","var each = require('./each'),\n    extend = require('./extend');\n\nmodule.exports = serialize;\n\nfunction serialize(data){\n  var query = [];\n  each(data, function(value, key){\n    if ('string' !== typeof value) {\n      value = JSON.stringify(value);\n    }\n    query.push(key + '=' + encodeURIComponent(value));\n  });\n  return query.join('&');\n}\n","// import 'whatwg-fetch';\n\nimport each from 'keen-core/lib/utils/each';\nimport serialize from 'keen-core/lib/utils/serialize';\n\nexport const GET = get;\nexport const POST = post;\nexport const PUT = put;\nexport const DELETE = del;\n\n// HTTP Handlers\n// ------------------------------\n\nfunction get(config, callback){\n  if (typeof fetch !== 'undefined') {\n    return sendFetch('GET', config, callback);\n  }\n  else if (xhrObject()) {\n    return sendXhr('GET', config, callback);\n  }\n  else if (xdrObject()){\n    return sendXdr('GET', config, callback);\n  }\n  else {\n    return sendJsonp(config, callback);\n  }\n}\n\nfunction post(config, callback){\n  if (typeof fetch !== 'undefined') {\n    console.log(\"FETCHING\");\n    return sendFetch('POST', config, callback);\n  }\n  else if (xhrObject()) {\n    return sendXhr('POST', config, callback);\n  }\n  else if (xdrObject()){\n    return sendXdr('POST', config, callback);\n  }\n  else {\n    callback('XHR POST not supported', null);\n  }\n}\n\nfunction put(config, callback) {\n  if (typeof fetch !== 'undefined') {\n    return sendFetch('PUT', config, callback);\n  }\n  else if (xhrObject()) {\n    return sendXhr('PUT', config, callback);\n  }\n  else {\n    callback('XHR PUT not supported', null);\n  }\n}\n\nfunction del(config, callback) {\n  if (typeof fetch !== 'undefined') {\n    return sendFetch('DELETE', config, callback);\n  }\n  else if (xhrObject()) {\n    return sendXhr('DELETE', config, callback);\n  }\n  else {\n    callback('XHR DELETE not supported', null);\n  }\n}\n\n\nfunction sendFetch(method, config, callback = undefined){\n  const self = this;\n  const headers = {};\n  let url = config.url;\n\n  if (method == 'GET') {\n    url += '?';\n    if (config.api_key) {\n      url += 'api_key=' + config.api_key + '&';\n    }\n    if (config.params) {\n      url += serialize(config.params);\n    }\n  }\n\n  each(config.headers, function(value, key){\n    if (typeof value === 'string') {\n      headers[key] = value;\n    }\n  });\n\n  return fetch(url, {\n      method,\n      body: (method !== 'GET' && config.params) ? JSON.stringify(config.params) : undefined,\n      mode: 'cors',\n      headers\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return response.json().then(responseJSON => {\n        return Promise.reject({\n          error_code: responseJSON.error_code,\n          body: responseJSON.message,\n          status: response.status,\n          ok: false,\n          statusText: response.statusText\n        });\n      });\n    }).then(responseJSON => {\n      if (typeof callback !== 'undefined') {\n        callback.call(self, null, responseJSON);\n      }\n      return Promise.resolve(responseJSON);\n    });\n}\n\n// XMLHttpRequest Support\n// ------------------------------\n\nfunction xhrObject() {\n  const root = 'undefined' == typeof window ? this : window;\n  if (root.XMLHttpRequest &&\n       (\n         !root.ActiveXObject ||\n         (root.location && root.location.protocol\n           && 'file:' !== root.location.protocol)\n       )\n  ) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  return false;\n}\n\nfunction sendXhr(method, config, callback){\n  const xhr = xhrObject();\n  const cb = callback;\n  let url = config.url;\n\n  xhr.onreadystatechange = function() {\n    let response;\n    if (xhr.readyState == 4) {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        if (xhr.status === 204) {\n          if (cb) {\n            cb(null, xhr);\n          }\n        }\n        else {\n          try {\n            response = JSON.parse( xhr.responseText );\n            if (cb && response) {\n              cb(null, response);\n            }\n          }\n          catch (e) {\n            if (cb) {\n              cb(xhr, null);\n            }\n          }\n        }\n      }\n      else {\n        try {\n          response = JSON.parse( xhr.responseText );\n          if (cb && response) {\n            cb(response, null);\n          }\n        }\n        catch (e) {\n          if (cb) {\n            cb(xhr, null);\n          }\n        }\n      }\n    }\n  };\n\n  if (method !== 'GET') {\n    xhr.open(method, url, true);\n    each(config.headers, function(value, key){\n      if (typeof value === 'string') {\n        xhr.setRequestHeader(key, value);\n      }\n    });\n    if (config.params) {\n      xhr.send( JSON.stringify(config.params) );\n    }\n    else {\n      xhr.send();\n    }\n  }\n  else {\n    url += '?';\n    if (config.api_key) {\n      url += 'api_key=' + config.api_key + '&';\n    }\n    if (config.params) {\n      url += serialize(config.params);\n    }\n    xhr.open(method, url, true);\n    each(config.headers, function(value, key){\n      if (typeof value === 'string') {\n        xhr.setRequestHeader(key, value);\n      }\n    });\n    xhr.send();\n  }\n\n  return xhr;\n}\n\n\n// XDomainRequest Support\n// ------------------------------\n\nfunction xdrObject() {\n  const root = 'undefined' == typeof window ? this : window;\n  if (root.XDomainRequest) {\n    return new root.XDomainRequest();\n  }\n  return false;\n}\n\nfunction sendXdr(method, config, callback) {\n  const xdr = xdrObject();\n  let cb = callback;\n\n  if (xdr) {\n    xdr.timeout = config.timeout || 300 * 1000;\n\n    xdr.ontimeout = function () {\n      handleResponse(xdr, null);\n    };\n\n    xdr.onerror = function () {\n      handleResponse(xdr, null);\n    };\n\n    xdr.onload = function() {\n      var response = JSON.parse(xdr.responseText);\n      handleResponse(null, response);\n    };\n\n    xdr.open(method.toLowerCase(), config.url);\n\n    setTimeout(function () {\n      if (config['params']) {\n        xdr.send( serialize(config['params']) );\n      }\n      else {\n        xdr.send();\n      }\n    }, 0);\n  }\n\n  function handleResponse(a, b){\n    if (cb && typeof cb === 'function') {\n      cb(a, b);\n      callback = cb = void 0;\n    }\n  }\n\n  return xdr;\n}\n\n\n// JSON-P Support\n// ------------------------------\n\nfunction sendJsonp(config, callback){\n  let url = config.url;\n  let cb = callback;\n  const timestamp = new Date().getTime();\n  const scriptTag = document.createElement('script');\n  const parent = document.getElementsByTagName('head')[0];\n  let callbackName = 'keenJSONPCallback';\n  let loaded = false;\n\n  callbackName += timestamp;\n  while (callbackName in window) {\n    callbackName += 'a';\n  }\n\n  window[callbackName] = function(response) {\n    if (loaded === true) {\n      return;\n    }\n    handleResponse(null, response);\n  };\n\n  if (config.params) {\n    url += serialize(config.params);\n  }\n\n  // Early IE (no onerror event)\n  scriptTag.onreadystatechange = function() {\n    if (loaded === false && this.readyState === 'loaded') {\n      handleResponse('An error occurred', null);\n    }\n  };\n\n  // Not IE\n  scriptTag.onerror = function() {\n    // on IE9 both onerror and onreadystatechange are called\n    if (loaded === false) {\n      handleResponse('An error occurred', null);\n    }\n  };\n\n  scriptTag.src = url + '&jsonp=' + callbackName;\n  parent.appendChild(scriptTag);\n\n  function handleResponse(a, b){\n    loaded = true;\n    if (cb && typeof cb === 'function') {\n      cb(a, b);\n      callback = cb = void 0;\n    }\n    window[callbackName] = undefined;\n    try {\n      delete window[callbackName];\n    } catch(e){};\n    parent.removeChild(scriptTag);\n  }\n\n}\n","import each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\n\nexport default function request(method, httpHandlers){\n  this.httpHandlers = httpHandlers;\n  return function(str){\n    this.config = {\n      'api_key' : undefined,\n      'method'  : method,\n      'params'  : undefined,\n      'timeout' : 300 * 1000,\n      'url'     : str,\n      'headers' : {\n        'Authorization' : '',\n        'Content-type'  : 'application/json'\n      }\n    };\n    return this;\n  }.bind(this);\n}\n\nrequest.prototype.auth = function(str){\n  if (typeof str === 'string') {\n    this.config.api_key = typeof str === 'string' ? str : undefined;\n    this.headers({\n      'Authorization': str\n    });\n  }\n  return this;\n};\n\nrequest.prototype.headers = function(obj){\n  if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      this.config['headers'][key] = value;\n    }.bind(this));\n  }\n  return this;\n};\n\nrequest.prototype.timeout = function(num){\n  this.config.timeout = typeof num === 'number' ? num : 300 * 1000;\n  return this;\n};\n\nrequest.prototype.send = function(obj){\n  this.config.params = (obj && typeof obj === 'object') ? obj : {};\n  const httpHandler = this.httpHandlers[this.config['method']];\n  const httpOptions = extend({}, this.config);\n\n  // Temporary mod to append analysis_type to responses\n  // for generic HTTP requests to known query resources\n  if (typeof httpOptions.params.analysis_type === 'undefined') {\n    if (httpOptions.url.indexOf('/queries/') > -1\n      && httpOptions.url.indexOf('/saved/') < 0) {\n        httpOptions.params.analysis_type = getAnalysisType(httpOptions.url);\n    }\n  }\n\n  return new Promise(function(resolve, reject, onCancel) {\n    const httpRequest = httpHandler(httpOptions, function(err, res){\n      let augmentedResponse = res;\n      if (err) {\n        reject(err);\n      }\n      else {\n        // Append query object to ad-hoc query results\n        if (typeof httpOptions.params.event_collection !== 'undefined'\n          && typeof res.query === 'undefined') {\n            augmentedResponse = extend({ query: httpOptions.params }, res);\n        }\n        resolve(augmentedResponse);\n      }\n    });\n    console.log(onCancel);\n    if (onCancel) {\n      console.log('ooo');\n      onCancel(function(){\n        if (httpRequest.abort) {\n          httpRequest.abort();\n        }\n      });\n    }\n    return httpRequest;\n  });\n};\n\nexport function getAnalysisType(str){\n  const split = str.split('/queries/');\n  return split[split.length-1];\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","module.exports = parseParams;\n\nfunction parseParams(str){\n  // via: http://stackoverflow.com/a/2880929/2511985\n  var urlParams = {},\n      match,\n      pl     = /\\+/g,  // Regex for replacing addition symbol with a space\n      search = /([^&=]+)=?([^&]*)/g,\n      decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); },\n      query  = str.split(\"?\")[1];\n\n  while (!!(match=search.exec(query))) {\n    urlParams[decode(match[1])] = decode(match[2]);\n  }\n  return urlParams;\n};\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","(function(env){\n  var previousKeen = env.Keen || undefined;\n  var each = require('./utils/each'),\n      extend = require('./utils/extend'),\n      parseParams = require('./utils/parse-params'),\n      serialize = require('./utils/serialize');\n\n  var Emitter = require('component-emitter');\n\n  function Client(props){\n    if (this instanceof Client === false) {\n      return new Client(props);\n    }\n    this.configure(props);\n\n    // Set up event handling\n    if (Client.debug) {\n      this.on('error', Client.log);\n    }\n    this.emit('ready');\n    Client.emit('client', this);\n  }\n\n  if (previousKeen && typeof previousKeen.resources === 'undefined') {\n    Client.legacyVersion = previousKeen;\n  }\n\n  Emitter(Client);\n  Emitter(Client.prototype);\n\n  extend(Client, {\n    debug: false,\n    enabled: true,\n    loaded: false,\n    version: '__VERSION__'\n  });\n\n  // Set or extend helpers\n  Client.helpers = Client.helpers || {};\n\n  // Set or extend resources\n  Client.resources = Client.resources || {};\n  extend(Client.resources, {\n    'base'      : '{protocol}://{host}',\n    'version'   : '{protocol}://{host}/3.0',\n    'projects'  : '{protocol}://{host}/3.0/projects',\n    'projectId' : '{protocol}://{host}/3.0/projects/{projectId}',\n    'events'    : '{protocol}://{host}/3.0/projects/{projectId}/events',\n    'queries'   : '{protocol}://{host}/3.0/projects/{projectId}/queries',\n    'datasets'  : '{protocol}://{host}/3.0/projects/{projectId}/datasets'\n  });\n\n  // Set or extend utils\n  Client.utils = Client.utils || {};\n  extend(Client.utils, {\n    'each'        : each,\n    'extend'      : extend,\n    'parseParams' : parseParams,\n    'serialize'   : serialize\n  });\n\n  Client.extendLibrary = function(target, source) {\n    var previous = previousKeen || source;\n    if (isDefined(previous) && isDefined(previous.resources)) {\n      each(previous, function(value, key) {\n        if (typeof value === 'object') {\n          target[key] = target[key] || {};\n          extend(target[key], value);\n        }\n        else {\n          target[key] = target[key] || value;\n        }\n      });\n      extend(target.prototype, previous.prototype);\n    }\n    return target;\n  };\n\n  Client.log = function(str){\n    if (Client.debug && typeof console === 'object') {\n      console.log('[Keen]', str);\n    }\n  };\n\n  Client.noConflict = function(){\n    if (typeof env.Keen !== 'undefined') {\n      env.Keen = Client.legacyVersion || previousKeen;\n    }\n    return Client;\n  };\n\n  Client.ready = function(fn){\n    if (Client.loaded) {\n      fn();\n    }\n    else {\n      Client.once('ready', fn);\n    }\n  };\n\n  Client.prototype.configure = function(obj){\n    var config = obj || {};\n    this.config = this.config || {\n      projectId    : undefined,\n      writeKey     : undefined,\n      host         : 'api.keen.io',\n      protocol     : 'https',\n      requestType  : 'jsonp',\n      resources    : extend({}, Client.resources)\n    };\n\n    // IE<10 request shim\n    if (typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1) {\n      config.protocol = document.location.protocol.replace(':', '');\n    }\n\n    if (config.host) {\n      config.host.replace(/.*?:\\/\\//g, '');\n    }\n\n    extend(this.config, config);\n    return this;\n  };\n\n  Client.prototype.masterKey = function(str){\n    if (!arguments.length) return this.config.masterKey;\n    this.config.masterKey = str ? String(str) : null;\n    return this;\n  };\n\n  Client.prototype.projectId = function(str){\n    if (!arguments.length) return this.config.projectId;\n    this.config.projectId = (str ? String(str) : null);\n    return this;\n  };\n\n  Client.prototype.resources = function(obj){\n    if (!arguments.length) return this.config.resources;\n    var self = this;\n    if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        self.config.resources[key] = (value ? value : null);\n      });\n    }\n    return self;\n  };\n\n  Client.prototype.url = function(name){\n    var args = Array.prototype.slice.call(arguments, 1),\n        baseUrl = this.config.resources.base || '{protocol}://{host}',\n        path;\n\n    if (name && typeof name === 'string') {\n      if (this.config.resources[name]) {\n        path = this.config.resources[name];\n      }\n      else {\n        path = baseUrl + name;\n      }\n    }\n    else {\n      path = baseUrl;\n    }\n\n    each(this.config, function(value, key){\n      if (typeof value !== 'object') {\n        path = path.replace('{' + key + '}', value);\n      }\n    });\n\n    each(args, function(arg, i){\n      if (typeof arg === 'string') {\n        path += '/' + arg;\n      }\n      else if (typeof arg === 'object') {\n        path += '?';\n        each(arg, function(value, key){\n          path += key + '=' + value + '&';\n        });\n        path = path.slice(0, -1);\n      }\n    });\n\n    return path;\n  };\n\n  domReady(function(){\n    Client.loaded = true;\n    Client.emit('ready');\n  });\n\n  function domReady(fn){\n    if (Client.loaded || typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    // Firefox 3.5 shim\n    if(document.readyState == null && document.addEventListener){\n      document.addEventListener('DOMContentLoaded', function DOMContentLoaded(){\n        document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n        document.readyState = 'complete';\n      }, false);\n      document.readyState = 'loading';\n    }\n    testDom(fn);\n  }\n\n  function testDom(fn){\n    if (/in/.test(document.readyState)) {\n      setTimeout(function(){\n        testDom(fn);\n      }, 9);\n    }\n    else {\n      fn();\n    }\n  }\n\n  function isDefined(target) {\n    return typeof target !== 'undefined';\n  }\n\n  function isUndefined(target) {\n    return typeof target === 'undefined';\n  }\n\n  module.exports = Client;\n\n}).call(this, typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {});\n","// import Promise from 'promise-polyfill';\nimport KeenLibrary from 'keen-core';\n//\"browsers\": [\"last 2 versions\", \"safari >= 7\"]\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\n\nKeenLibrary.prototype.readKey = function(str){\n  if (!arguments.length) return this.config.readKey;\n  this.config.readKey = str ? String(str) : null;\n  return this;\n};\n\nKeenLibrary.prototype.query = function(a, b){\n  if (a && b && typeof b === 'string') {\n    if (b.indexOf('/result') < 0) {\n      b += '/result';\n    }\n    return this\n      .get(this.url('queries', a, b))\n      .auth(this.readKey())\n      .send();\n  }\n  else if (a === 'dataset' && typeof b === 'object') {\n    return this\n      .get(this.url('datasets', b.name, 'results'))\n      .auth(this.readKey())\n      .send(b);\n  }\n  else if (a && b && typeof b === 'object') {\n    // Include analysis_type for downstream use\n    const q = extend({ analysis_type: a }, b);\n    return this\n      .post(this.url('queries', a))\n      .auth(this.readKey())\n      .send(q);\n  }\n  else if (a && !b) {\n    return Promise.reject({\n      error_code: 'SDKError',\n      message: \".query() called with incorrect arguments\"\n    });\n  }\n};\n\n// Keen.Query handler\n// --------------------------------\nKeenLibrary.Query = Query;\n\nKeenLibrary.prototype.run = function(q, callback){\n  const self = this;\n  const cb = callback;\n  let output;\n\n  const queries = q instanceof Array? q : [q];\n  const promises = [];\n\n  each(queries, function(query, i){\n    if (typeof query === 'string') {\n      promises.push(self.query('saved', query + '/result'));\n    }\n    else if (query instanceof KeenLibrary.Query) {\n      // Include analysis_type for downstream use\n      promises.push(self.query(query.analysis, extend({ analysis_type: query.analysis }, query.params)));\n    }\n  });\n\n  if (promises.length > 1) {\n    output = Promise.all(promises);\n  }\n  else {\n    // Only return single\n    output = promises[0];\n  }\n\n  if (cb) {\n    // Manually handle callback, as\n    // Promise.nodeify drops nulls\n    output.then(function(res){\n      cb(null, res);\n    });\n    output['catch'](function(err){\n      cb(err, null);\n    });\n  }\n\n  return output;\n};\n\nfunction Query(analysisType, params) {\n  this.analysis = analysisType;\n  this.params = {};\n  this.set(params);\n\n  // Localize timezone if none is set\n  if (this.params.timezone === void 0) {\n    this.params.timezone = new Date().getTimezoneOffset() * -60;\n  }\n}\n\nQuery.prototype.set = function(attributes) {\n  const self = this;\n  each(attributes, function(v, k){\n    let key = k;\n    let value = v;\n    if (k.match(new RegExp('[A-Z]'))) {\n      key = k.replace(/([A-Z])/g, function($1) { return '_'+$1.toLowerCase(); });\n    }\n    self.params[key] = value;\n    if (value instanceof Array) {\n      each(value, function(dv, index){\n        if (dv instanceof Array == false && typeof dv === 'object') {\n          each(dv, function(deepValue, deepKey){\n            if (deepKey.match(new RegExp('[A-Z]'))) {\n              var _deepKey = deepKey.replace(/([A-Z])/g, function($1) { return '_'+$1.toLowerCase(); });\n              delete self.params[key][index][deepKey];\n              self.params[key][index][_deepKey] = deepValue;\n            }\n          });\n        }\n      });\n    }\n  });\n  return self;\n};\n\nQuery.prototype.get = function(attribute) {\n  let key = attribute;\n  if (key.match(new RegExp('[A-Z]'))) {\n    key = key.replace(/([A-Z])/g, function($1) { return '_'+$1.toLowerCase(); });\n  }\n  if (this.params) {\n    return this.params[key] || null;\n  }\n};\n\nQuery.prototype.addFilter = function(property, operator, value) {\n  this.params.filters = this.params.filters || [];\n  this.params.filters.push({\n    'property_name': property,\n    'operator': operator,\n    'property_value': value\n  });\n  return this;\n};\n\nexport const KeenAnalysis = KeenLibrary;\nexport default KeenAnalysis;\n","import extend from 'keen-core/lib/utils/extend';\n\nimport KeenAnalysis from './index';\nimport request from './request';\nimport * as httpHandlers from './utils/http-browser';\n\nKeenAnalysis.prototype.get = new request('GET', httpHandlers);\nKeenAnalysis.prototype.post = new request('POST', httpHandlers);\nKeenAnalysis.prototype.put = new request('PUT', httpHandlers);\nKeenAnalysis.prototype.del = new request('DELETE', httpHandlers);\n\nexport const Keen = KeenAnalysis.extendLibrary(KeenAnalysis);\nexport default Keen;\n"],"sourceRoot":""}